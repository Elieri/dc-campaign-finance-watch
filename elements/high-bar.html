<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>

<polymer-element name="high-bar" attributes="charts">
	<template>
		<template repeat="{{chart in charts}}">
	        <div id="container" style="max-width: 600px; max-height: 400px;"></div>
		</template>
	</template>
    <script>
    Polymer("bar-chart", {
        ready: function() {
            var options = {
                chart: {
                    type: 'bar',
                    renderTo: this.$.container
                },
                title: {
                    text:  'NO DATA FOR THIS ELECTED OFFICE'
                },
                subtitle: {
                    text: '(If there is no data, we do not produce a chart)'
                },
                xAxis: {
                    categories: []
                },
                yAxis: {
                    title: {
                        text: ''
                    }
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                legend: {
                    enabled: false
                },
                credits: {
                    enabled: false
                },
                series: [{}]
            };
            $.getJSON(this.source).done(function(chart) {
                options.xAxis.categories = chart.categories;
                options.series[0].data = chart.series;
                options.title.text = chart.title;
                options.subtitle.text = chart.subtitle;
                options.yAxis.title.text = chart.yAxistitle;
                var chart = new Highcharts.Chart(options);
            });
        }
    });
    </script>
</polymer-element>
